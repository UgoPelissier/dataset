# Dataset creation

## Stokes 2d

The *stokes2* dataset is a 2d dataset with 2 velocity components and 1 pressure component. The dataset is generated by solving the Stokes equation with a finite element method, using *FreeFem++* open-source software.

The domain is a square with one or two circular holes. U-velocity is set to one on the left boundary.

The `stokes2.sh` file contains the commands to generate the dataset. The `stokes2.sh` file can be run with the command:

```bash
bash ./stokes2.sh -p 2 -n 500 -l 1.0 -c 0.1
```

To get help on the parameters, run:

```bash
bash ./stokes2.sh -h
```

The dataset is generated by the following code:

```bash
cd stokes2
python main.py
FreeFem++ stokes.edp
```

- The python file generates the circles.txt files and the CAD files that can be read by *GMSH* to generate a mesh (```geo/cad_*.geo``` files).
- The *FreeFem++* file generates the mesh (```mesh/cad_*.msh``` files), solves the Stokes equation and saves the solution in a ```vtk``` file.

The ```vtk``` file can be read by *Paraview* to visualize the solution.

## Stokes 3d

The *stokes3* dataset is a 3d dataset with 3 velocity components and 1 pressure component. The dataset is generated by solving the Stokes equation with a finite element method, using *FreeFem++* open-source software.

The domain is a box with one or two circular cylinders. U-velocity is set to one on the left boundary. Mesh size is set constant on the edges of the box of the domain, and is adapted on the edges of the cylinders.

The `stokes3.sh` file contains the commands to generate the dataset. The `stokes3.sh` file can be run with the command:

```bash
bash ./stokes3.sh -p 2 -n 500 -l 1.0 -c 0.1
```

To get help on the parameters, run:

```bash
bash ./stokes3.sh -h
```

The dataset is generated by the following code:

```
cd stokes3
python main.py
gmsh convert.geo
FreeFem++ stokes3.edp
```

- The python file generates the CAD files (```geo/cad_*.geo``` files) and the script to convert them to more general CAD files (```convert.geo``` file).
- The ```convert.geo``` file is read by *GMSH* to generate ```geo/cad_*.geo_unrolled``` files
- The *FreeFem++* file reads the mesh, solves the Stokes equation and saves the solution in a ```vtu``` file and the metric for mesh adaptation in a ```sol``` file.

The ```vtu``` file can be read by *Paraview* to visualize the solution.

## Stokes 3d adapt

The *stokes3adapt* dataset is a 3d dataset with 3 velocity components and 1 pressure component. The dataset is generated by solving the Stokes equation with a finite element method, using *FreeFem++* open-source software.

The domain is a box with one or two circular cylinders. U-velocity is set to one on the left boundary. In comparison with the *stokes3* dataset, the mesh size is adapted on the edges of the box of the domain, so that the closer a node of the box is to a cylinder, the smaller the mesh size is.

The `stokes3adapt.sh` file contains the commands to generate the dataset. The `stokes3adapt.sh` file can be run with the command:

```bash
bash ./stokes3adapt.sh -p 2 -n 500 -l 1.0 -c 0.1
```

To get help on the parameters, run:

```bash
bash ./stokes3adapt.sh -h
```

The dataset is generated by the following code:

```
cd stokes3
python main.py
gmsh convert.geo
FreeFem++ stokes3.edp
```

- The python file generates the CAD files (```geo/cad_*.geo``` files) and the script to convert them to more general CAD files (```convert.geo``` file).
- The ```convert.geo``` file is read by *GMSH* to generate ```geo/cad_*.geo_unrolled``` files
- The *FreeFem++* file reads the mesh, solves the Stokes equation and saves the solution in a ```vtu``` file and the metric for mesh adaptation in a ```sol``` file.

The ```vtu``` file can be read by *Paraview* to visualize the solution.